apiVersion: 1

policies:
  - orgId: 1
    receiver: grafana-default-email
    group_by: ['grafana_folder', 'alertname']
    routes:
      # Critical alerts → webhook contact point
      - receiver: transaction-alerts-webhook
        matchers:
          - severity = critical
        group_wait: 30s
        group_interval: 5m
        repeat_interval: 1h
      # Warning alerts → default (Grafana UI only)
      - receiver: grafana-default-email
        matchers:
          - severity = warning
        group_wait: 1m
        group_interval: 5m
        repeat_interval: 4h
